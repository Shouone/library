webpackJsonp([4],{QfFk:function(t,o){},tcnj:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("Xxa5"),a=e.n(n),s=e("Gu7T"),r=e.n(s),i=e("exGp"),c=e.n(i),u=e("uGP+"),l=e("gyMJ"),d=e("Cpzh"),f={data:function(){return{books:[],offset:0,hasMore:!0,isLoading:!1,timer:null}},created:function(){this.getdata()},methods:{addCart:function(t){this.$store.commit(d.a,t)},scrolload:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){var o=t.$refs.scroll;o.scrollTop+o.clientHeight+20>o.scrollHeight&&t.getdata()},130)},getdata:function(){var t=this;return c()(a.a.mark(function o(){var e,n,s;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!t.hasMore||t.isLoading){o.next=11;break}return t.isLoading=!0,o.next=4,Object(l.d)(t.offset);case 4:e=o.sent,n=e.hasMore,s=e.books,t.books=[].concat(r()(t.books),r()(s)),t.hasMore=n,t.offset=t.books.length,t.isLoading=!1;case 11:case"end":return o.stop()}},o,t)}))()},remove:function(t){var o=this;return c()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.e)(t);case 2:o.books=o.books.filter(function(o){return o.bookId!=t});case 3:case"end":return e.stop()}},e,o)}))()}},computed:{},components:{Mheader:u.a}},v={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("Mheader",[t._v("列表")]),t._v(" "),e("div",{ref:"scroll",staticClass:"content",on:{scroll:t.scrolload}},[e("ul",{staticClass:"bookList"},[t._l(t.books,function(o,n){return e("router-link",{key:n,attrs:{to:{name:"detail",params:{bid:o.bookId}},tag:"li"}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:o.bookCover,expression:"book.bookCover"}],attrs:{src:o.bookCover}}),t._v(" "),e("div",{staticClass:"bookInfo"},[e("h3",[t._v(t._s(o.bookName))]),t._v(" "),e("p",[t._v(t._s(o.bookInfo))]),t._v(" "),e("span",[t._v(t._s(o.bookPrice))]),t._v(" "),e("button",{staticClass:"colect",on:{click:function(e){e.stopPropagation(),t.remove(o.bookId)}}},[t._v("删除")]),t._v(" "),e("button",{staticClass:"colect",on:{click:function(e){e.stopPropagation(),t.addCart(o)}}},[t._v("添加")])])])}),t._v(" "),e("button",{staticClass:"more",on:{click:t.getdata}},[t._v("加载更多")])],2)])],1)},staticRenderFns:[]};var k=e("VU/8")(f,v,!1,function(t){e("QfFk")},"data-v-fbed3938",null);o.default=k.exports}});
//# sourceMappingURL=4.8a49b91097d5f3111d0f.js.map